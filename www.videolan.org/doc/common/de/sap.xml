<?xml version="1.0" encoding="iso-8859-1" ?>

<chapter id="sap"><title id="tsap">
Einen Kanalinformationsdienst hinzufügen
</title>


<para>Multicast-Adressen einzugeben ist nicht sehr spaßig...deshalb brauchen
Sie einen Kanalinformationsdienst! VideoLAN enthält einen
Kanalinformationsdienst, der auf dem SAP/SDP-Standard basiert. Die
SAP-Ankündigungen der Multicast-Programme werden über das Netzwerk
versendet (über die Multicast-Adresse <emphasis>224.2.127.254</emphasis>,
die dafür reserviert ist). Auf der Client-Seite erhalten VLCs diese Ankündigungen
und fügen die Programme automatisch ihrer Wiedergabeliste hinzu.</para>



<para>VLC kann die SAP-Ankündigungen, die den von ihm gestreamten Programmen
entsprechen, senden. VLS kann dies nicht, aber ein unabhängiges Programm,
der mini-SAP-server, kann die Ankündigungen für von VLS gesendeten Programme
senden.</para>


<sect1><title>
Ankündigungen beim Streamen mit VLC senden
</title>

<para>
Um Ankündigungen mit VLC zu versenden, müssen Sie die komplexe
Syntax von VLCs Streamausgabe wie folgt benutzen:
</para>

<screen>
<prompt>% </prompt><userinput>vlc -vvv input_stream --sout '#standard{access=udp,url=239.255.12.42,sap,name="Test Stream"}' --ttl 12</userinput>
</screen>


<para>wobei <filename>video1.xyz</filename> die Datei ist, die Sie streamen
möchten, <emphasis>239.255.12.42</emphasis> die Multicast-IP-Adresse ist,
über die Sie streamen möchten, <emphasis>Test Stream</emphasis> ist der
Name des Programms, der in den SAP-Ankündigungen benutzt werden wird und
<emphasis>12</emphasis> ist der Wert der TTL (Time To Live) des Streams
und der SAP-Ankündigungen.</para>


<para>
Um SAP-Ankündigungen in IPv6 zu machen, fügen Sie
einfach die <emphasis>sap_ipv=6</emphasis>-Option hinzu:
</para>

<screen>
<prompt>% </prompt><userinput>vlc -vvv input_stream --sout '#standard{access=udp,url=239.255.12.42,sap,name="Test Stream",sap_ipv=6}' --ttl 12</userinput>
</screen>

</sect1>

<sect1><title>
Senden von Ankündigungen der Programme, die von VLS
gestreamt werden, mit dem mini-SAP-server
</title>


<note><para>
der mini-SAP-server ist nur für Linux und Mac OS X verfügbar.
</para></note>

<simplesect><title>
Installation des mini-SAP-servers
</title>


<para>
Laden Sie die neueste Version des mini-SAP-servers von der <ulink
url="http://www.videolan.org/streaming/">Streaming Downloadseite</ulink> herunter.
</para>

<para>
Installieren Sie sie:
</para>

<screen>
<prompt>% </prompt><userinput>tar xvzf miniSAPserver-version.tar.gz</userinput>
<prompt>% </prompt><userinput>cd miniSAPserver-version</userinput>
<prompt>% </prompt><userinput>./configure</userinput>
<prompt>% </prompt><userinput>make</userinput>
</screen>

</simplesect>

<simplesect><title>
Konfigurieren Sie den mini-SAP-server
</title>


<para>Bearbeiten Sie die mit dem Tarball gelieferte Konfigurationsdatei
<filename>sap.cfg</filename>. Es sollte eine globale Sektion mit der
Time To Live (TTL) und der IP-Version (IPv4 oder IPv6) geben, die für die
SAP-Ankündigungen werden, sowie eine Sektion pro angekündigtes Programm.
Nutzen Sie die Kommentare, um jeden Parameter zu verstehen.</para>
<para>Die Time To Live - Option legt die Anzahl von Router fest, die ein
SAP-Ankündigungspaket überqueren kann, bevor es fallengelassen wird.</para>


</simplesect>

<simplesect><title>
Start des mini-SAP-servers
</title>

<para>
Starten Sie den mini-SAP-server:
</para>

<screen>
<prompt>% </prompt><userinput>./sapserver -c sap.cfg</userinput>
</screen>

<para>
Wenn Sie den mini-SAP-server im Hintergrund betreiben
möchten, benutzen Sie die Option <command>-d</command>. Zum Beispiel:
</para>

<screen>
<prompt>% </prompt><userinput>./sapserver -d -c sap.cfg</userinput>
</screen>

<para>
You can also omit the <command>-c</command> 
command line switch if your config file is <filename>/etc/sap.cfg</filename>.

</para>

</simplesect>
</sect1>

<sect1><title>
VLC auf den/dem Client/s starten
</title>

<itemizedlist>

<listitem><para>
Wenn die Ankündigungen per IPv4 gesendet werden:
</para>

<screen>
<prompt>% </prompt><userinput>vlc -vvv --extraintf sap</userinput>
</screen>

</listitem>

<listitem><para>
Wenn die Ankündigungen per IPv6 gesendet werden:
</para>

<screen>
<prompt>% </prompt><userinput>vlc -vvv --extraintf sap --sap-ipv6</userinput>
</screen>

</listitem>

</itemizedlist>


<para>Öffnen Sie dann die Wiedergabeliste. Sie sollten die Namen der per SAP
angekündigten Programme sehen. Wenn Sie auf den Namen eines Programmes
doppelklicken, wird VLC sich bei der Multicast-Adresse einschreiben und anfangen
den Stream abzuspielen!</para>


</sect1>
</chapter>
